#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


record(longSub, "$(IOC):PATTERN") {
  field(DESC, "Pattern ")
  field(SNAM, "evrPatternProc")
  field(BRSV, "INVALID")
# Initialize to "MPG_IPLING" (0x4000)
  field(D, "16384")
# Initialize to the invalid pulse ID (0x1FFFF)
  field(L, "131071")
  field(Z, "4")
  field(SDIS, "")
  field(FLNK, "$(IOC):PATTERN360HZ")
  field(TSE, "-1")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(IOC):PATTERN",65,20,0,0,"$(IOC):PATTERN")
#! Field("$(IOC):PATTERN.SDIS",16777215,1,"$(IOC):PATTERN.SDIS")
#! Field("$(IOC):PATTERN.FLNK",16777215,1,"$(IOC):PATTERN.FLNK")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


record(longSub, "$(IOC):PATTERN360HZ") {
  field(DESC, "Pattern 360HZ")
  field(SNAM, "evrPatternProc")
  field(BRSV, "INVALID")
# Initialize to "MPG_IPLING" (0x4000)
  field(D, "16384")
# Initialize to the invalid pulse ID (0x1FFFF)
  field(L, "131071")
  field(Z, "0")
  field(SDIS, "")
  field(FLNK, "$(IOC):PATTERNN-1")
  field(TSE, "1")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(IOC):PATTERN360HZ",65,20,0,0,"$(IOC):PATTERN360HZ")
#! Field("$(IOC):PATTERN360HZ.SDIS",16777215,1,"$(IOC):PATTERN360HZ.SDIS")
#! Field("$(IOC):PATTERN360HZ.FLNK",16777215,1,"$(IOC):PATTERN360HZ.FLNK")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


record(longSub, "$(IOC):PATTERNN-1") {
  field(DESC, "Pattern N-1")
  field(SNAM, "evrPatternProc")
  field(BRSV, "INVALID")
# Initialize to "MPG_IPLING" (0x4000)
  field(D, "16384")
# Initialize to the invalid pulse ID (0x1FFFF)
  field(L, "131071")
  field(Z, "1")
  field(SDIS, "")
  field(FLNK, "$(IOC):PATTERNN-2")
  field(TSE, "-1")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(IOC):PATTERNN-1",65,20,0,0,"$(IOC):PATTERNN-1")
#! Field("$(IOC):PATTERNN-1.SDIS",16777215,1,"$(IOC):PATTERNN-1.SDIS")
#! Field("$(IOC):PATTERNN-1.FLNK",16777215,1,"$(IOC):PATTERNN-1.FLNK")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


record(longSub, "$(IOC):PATTERNN-2") {
  field(DESC, "Pattern N-2")
  field(SNAM, "evrPatternProc")
  field(BRSV, "INVALID")
# Initialize to "MPG_IPLING" (0x4000)
  field(D, "16384")
# Initialize to the invalid pulse ID (0x1FFFF)
  field(L, "131071")
  field(Z, "2")
  field(SDIS, "")
  field(FLNK, "")
  field(TSE, "-1")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(IOC):PATTERNN-2",65,20,0,0,"$(IOC):PATTERNN-2")
#! Field("$(IOC):PATTERNN-2.SDIS",16777215,1,"$(IOC):PATTERNN-2.SDIS")
#! Field("$(IOC):PATTERNN-2.FLNK",16777215,1,"$(IOC):PATTERNN-2.FLNK")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


record(longSub, "$(IOC):PATTERND") {
  field(DESC, "Pattern D")
  field(SNAM, "evrPatternProc")
  field(BRSV, "INVALID")
# Initialize to "MPG_IPLING" (0x4000)
  field(D, "16384")
# Initialize to the invalid pulse ID (0x1FFFF)
  field(L, "131071")
  field(Z, "4")
  field(SDIS, "")
  field(FLNK, "$(IOC):PATTERND-0")
  field(TSE, "-1")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(IOC):PATTERND",65,20,0,0,"$(IOC):PATTERND")
#! Field("$(IOC):PATTERND.SDIS",16777215,1,"$(IOC):PATTERND.SDIS")
#! Field("$(IOC):PATTERND.FLNK",16777215,1,"$(IOC):PATTERND.FLNK")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


record(longSub, "$(IOC):PATTERND-0") {
  field(DESC, "Pattern D-0")
  field(SNAM, "evrPatternProc")
  field(BRSV, "INVALID")
# Initialize to "MPG_IPLING" (0x4000)
  field(D, "16384")
# Initialize to the invalid pulse ID (0x1FFFF)
  field(L, "131071")
  field(Z, "0")
  field(SDIS, "")
  field(FLNK, "$(IOC):PATTERND-1")
  field(TSE, "-1")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(IOC):PATTERND-0",65,20,0,0,"$(IOC):PATTERND-0")
#! Field("$(IOC):PATTERND-0.SDIS",16777215,1,"$(IOC):PATTERND-0.SDIS")
#! Field("$(IOC):PATTERND-0.FLNK",16777215,1,"$(IOC):PATTERND-0.FLNK")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


record(longSub, "$(IOC):PATTERND-1") {
  field(DESC, "Pattern D-1")
  field(SNAM, "evrPatternProc")
  field(BRSV, "INVALID")
# Initialize to "MPG_IPLING" (0x4000)
  field(D, "16384")
# Initialize to the invalid pulse ID (0x1FFFF)
  field(L, "131071")
  field(Z, "1")
  field(SDIS, "")
  field(FLNK, "$(IOC):PATTERND-2")
  field(TSE, "-1")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(IOC):PATTERND-1",65,20,0,0,"$(IOC):PATTERND-1")
#! Field("$(IOC):PATTERND-1.SDIS",16777215,1,"$(IOC):PATTERND-1.SDIS")
#! Field("$(IOC):PATTERND-1.FLNK",16777215,1,"$(IOC):PATTERND-1.FLNK")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


record(longSub, "$(IOC):PATTERND-2") {
  field(DESC, "Pattern D-2")
  field(SNAM, "evrPatternProc")
  field(BRSV, "INVALID")
# Initialize to "MPG_IPLING" (0x4000)
  field(D, "16384")
# Initialize to the invalid pulse ID (0x1FFFF)
  field(L, "131071")
  field(Z, "2")
  field(SDIS, "")
  field(FLNK, "$(IOC):PATTERND-3")
  field(TSE, "-1")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(IOC):PATTERND-2",65,20,0,0,"$(IOC):PATTERND-2")
#! Field("$(IOC):PATTERND-2.SDIS",16777215,1,"$(IOC):PATTERND-2.SDIS")
#! Field("$(IOC):PATTERND-2.FLNK",16777215,1,"$(IOC):PATTERND-2.FLNK")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


record(longSub, "$(IOC):PATTERND-3") {
  field(DESC, "Pattern D-3")
  field(SNAM, "evrPatternProc")
  field(BRSV, "INVALID")
# Initialize to "MPG_IPLING" (0x4000)
  field(D, "16384")
# Initialize to the invalid pulse ID (0x1FFFF)
  field(L, "131071")
  field(Z, "3")
  field(SDIS, "")
  field(FLNK, "$(IOC):PATTERNSTATE")
  field(TSE, "-1")
}

#! Further lines contain data used by VisualDCT
#! View(0,0,1.0)
#! Record("$(IOC):PATTERND-3",65,20,0,0,"$(IOC):PATTERND-3")
#! Field("$(IOC):PATTERND-3.SDIS",16777215,1,"$(IOC):PATTERND-3.SDIS")
#! Field("$(IOC):PATTERND-3.FLNK",16777215,1,"$(IOC):PATTERND-3.FLNK")
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBDEND


record(longSub, "$(IOC):FIDUCIAL") {
  field(DESC, "Fiducial Processing")
  field(INAM, "evrTimeProcInit")
  field(SNAM, "evrTimeProc")
  field(FLNK, "$(IOC):PATTERNFO")
  field(INPI, "$(TS1ST=$($(SYS=0)_TS1ST),SYS0_TS1ST=1,SYS1_TS1ST=2,SYS2_TS1ST=2)")
  field(INPJ, "$(TS2ND=$($(SYS=0)_TS2ND),SYS0_TS2ND=4,SYS1_TS2ND=5,SYS2_TS2ND=5)")
  field(BRSV, "INVALID")
}

record(fanout, "$(IOC):PATTERNFO") {
  field(LNK1, "$(IOC):PATTERN")
  field(LNK3, "$(IOC):MODIFIER5")
  field(LNK4, "$(LINK4=)")
  field(LNK5, "$(LINK5=)")
  field(LNK6, "$(LINK6=)")
}

record(longSub, "$(IOC):MODIFIER5") {
  field(SNAM, "evrModifier5Bits")
  field(INPV, "$(IOC):PATTERN.H MS")
  field(BRSV, "INVALID")
}

record(longSub, "$(IOC):FIDUCIALDIAG") {
  field(DESC, "FIDUCIAL Diagnostics")
  field(EVNT, "121")
  field(SCAN, "Event")
  field(PRIO, "HIGH")
  field(SNAM, "evrTimeDiag")
  field(BRSV, "INVALID")
  field(FLNK, "$(IOC):PATTERND")
}

record(seq, "$(IOC):RESETCNT") {
  field(DESC, "Counter Reset")
  field(PINI, "YES")
  field(DLY1, "1")
  field(DOL1, "1")
  field(LNK1, "$(IOC):FIDUCIALDIAG.R")
  field(DOL2, "1")
  field(LNK2, "$(IOC):PATTERNDIAG.B")
  field(LNK3, "$(IOC):RESETCNT.DLY1")
}

record(mbbo, "$(IOC):PATTERNSTATE") {
  field(DESC, "Pattern Processing State")
  field(DOL, "$(IOC):PATTERNDIAG PP")
  field(ZRST, "OK")
  field(ONST, "INVALID_DATA")
  field(ONSV, "INVALID")
  field(TWST, "NO_DATA")
  field(TWSV, "INVALID")
  field(THST, "INVALID_TIME")
  field(THSV, "INVALID")
  field(FRST, "MPG_IPLING")
  field(FRSV, "MAJOR")
  field(FVST, "TS_NO_SYNC")
  field(FVSV, "MAJOR")
  field(SXST, "TS_PATT_NO_SYNC")
  field(SXSV, "MAJOR")
  field(SVST, "TS_MISMATCH")
  field(SVSV, "MAJOR")
  field(EIST, "PULSEID_NO_SYNC")
  field(EISV, "MAJOR")
  field(NIST, "MODULO_NO_SYNC")
  field(NISV, "MAJOR")
  field(TEST, "TIMEOUT")
  field(TESV, "MAJOR")
  field(ELST, "ERROR")
  field(ELSV, "INVALID")
  field(UNSV, "INVALID")
  field(OMSL, "closed_loop")
  field(FLNK, "$(IOC):NTPSTATE")
}

record(bo, "$(IOC):NTPSTATE") {
  field(DESC, "NTP State")
  field(DOL, "$(IOC):PATTERNDIAG.R")
  field(ZNAM, "OK")
  field(ONAM, "ERROR")
  field(OSV, "INVALID")
  field(OMSL, "closed_loop")
}

record(ao, "$(IOC):TREF") {
  field(DESC, "IOC Trig Ref")
  field(DTYP, "Raw Soft Channel")
  field(OMSL, "supervisory")
  field(LINR, "SLOPE")
  field(EGU, "nsec")
  field(HOPR, "2.8E06")
  field(DRVH, "2.8E06")
  field(PINI, "YES")
  field(ESLO, "8.40336692324359")
  field(VAL, "$(TREF=1.03E06)")
  field(PREC, "0")
}

#! Further lines contain data used by VisualDCT
#! View(1153,1347,0.7)
#! Record("$(IOC):FIDUCIAL",1360,1603,0,1,"$(IOC):FIDUCIAL")
#! Field("$(IOC):FIDUCIAL.FLNK",16777215,1,"$(IOC):FIDUCIAL.FLNK")
#! Link("$(IOC):FIDUCIAL.FLNK","$(IOC):PATTERNFO")
#! Field("$(IOC):FIDUCIAL.INPI",16777215,1,"$(IOC):FIDUCIAL.INPI")
#! Field("$(IOC):FIDUCIAL.INPJ",16777215,1,"$(IOC):FIDUCIAL.INPJ")
#! Record("$(IOC):PATTERNFO",1640,1692,0,0,"$(IOC):PATTERNFO")
#! Field("$(IOC):PATTERNFO.LNK1",16777215,1,"$(IOC):PATTERNFO.LNK1")
#! Field("$(IOC):PATTERNFO.LNK3",16777215,1,"$(IOC):PATTERNFO.LNK3")
#! Link("$(IOC):PATTERNFO.LNK3","$(IOC):MODIFIER5")
#! Field("$(IOC):PATTERNFO.LNK4",16777215,1,"$(IOC):PATTERNFO.LNK4")
#! Field("$(IOC):PATTERNFO.LNK5",16777215,1,"$(IOC):PATTERNFO.LNK5")
#! Field("$(IOC):PATTERNFO.LNK6",16777215,1,"$(IOC):PATTERNFO.LNK6")
#! Record("$(IOC):MODIFIER5",1920,1840,0,0,"$(IOC):MODIFIER5")
#! Field("$(IOC):MODIFIER5.INPV",16777215,1,"$(IOC):MODIFIER5.INPV")
#! Record("$(IOC):FIDUCIALDIAG",2400,1783,0,0,"$(IOC):FIDUCIALDIAG")
#! Field("$(IOC):FIDUCIALDIAG.FLNK",16777215,1,"$(IOC):FIDUCIALDIAG.FLNK")
#! Field("$(IOC):FIDUCIALDIAG.R",16777215,0,"$(IOC):FIDUCIALDIAG.R")
#! Record("$(IOC):RESETCNT",2080,2008,0,0,"$(IOC):RESETCNT")
#! Field("$(IOC):RESETCNT.LNK1",16777215,1,"$(IOC):RESETCNT.LNK1")
#! Link("$(IOC):RESETCNT.LNK1","$(IOC):FIDUCIALDIAG.R")
#! Field("$(IOC):RESETCNT.LNK2",16777215,1,"$(IOC):RESETCNT.LNK2")
#! Field("$(IOC):RESETCNT.DLY1",16777215,0,"$(IOC):RESETCNT.DLY1")
#! Field("$(IOC):RESETCNT.LNK3",16777215,0,"$(IOC):RESETCNT.LNK3")
#! Link("$(IOC):RESETCNT.LNK3","$(IOC):RESETCNT.DLY1")
#! Record("$(IOC):PATTERNSTATE",2400,2159,0,0,"$(IOC):PATTERNSTATE")
#! Field("$(IOC):PATTERNSTATE.DOL",16777215,1,"$(IOC):PATTERNSTATE.DOL")
#! Field("$(IOC):PATTERNSTATE.FLNK",16777215,1,"$(IOC):PATTERNSTATE.FLNK")
#! Link("$(IOC):PATTERNSTATE.FLNK","$(IOC):NTPSTATE")
#! Record("$(IOC):NTPSTATE",2660,2578,0,0,"$(IOC):NTPSTATE")
#! Field("$(IOC):NTPSTATE.DOL",16777215,1,"$(IOC):NTPSTATE.DOL")
#! Record("$(IOC):TREF",2660,2165,0,0,"$(IOC):TREF")
#! TextBox(TB3,2380,2120,2680,2160,0,"Dialog",12,1,16777215,"Diagnostic Records \n    Provide counters and states at a lower rate\n",null)
#! TextBox(TB2,1360,1580,1620,1620,0,"Dialog",18,1,16777215,"360 Hz Processing",null)
#! TextBox(TB1,1618,1603,1998,1683,0,"Dialog",12,1,16777215,"PATTERNFO fans out to \n1) SLC-Aware Pattern Check Records (optional)\n2) BSA EDEF Enable Records\n3) Trigger Attribute Change Records (optional)\n",null)
#! Generated by VisualDCT v2.5
#! DBDSTART
#! DBD("../../dbd/edef.dbd")
#! DBDEND


record(longSub, "$(IOC):PATTERNN-3") {
  field(DESC, "Pattern N-3")
  field(INAM, "evrPatternProcInit")
  field(SNAM, "evrPatternProc")
  field(BRSV, "INVALID")
# Initialize to "MPG_IPLING" (0x4000)
  field(D, "16384")
# Initialize to the invalid pulse ID (0x1FFFF)
  field(L, "131071")
  field(X, "1")
  field(Z, "3")
}

record(longSub, "$(IOC):PATTERNDIAG") {
  field(DESC, "Pattern Processing State")
  field(SNAM, "evrPatternState")
  field(INPA, "$(IOC):PATTERND-2")
  field(BRSV, "INVALID")
  field(FLNK, "$(IOC):FIDUCIALRATE")
}

record(sub, "$(IOC):FIDUCIALRATE") {
  field(DESC, "FIDUCIAL Event Rate")
  field(SNAM, "evrTimeRate")
  field(BRSV, "INVALID")
  field(INPE, "1")
  field(EGU, "Hz")
  field(PREC, "1")
  field(HIHI, "360.5")
  field(HHSV, "MAJOR")
  field(LOLO, "359.5")
  field(LLSV, "MAJOR")
  field(HOPR, "360")
}

record(erevent, "$(IOC):FIDUCIALCTRL") {
  field(DESC, "Fiducial Event Control")
  field(PINI, "YES")
  field(DTYP, "MRF Event Receiver")
  field(OUT, "#C0 S0 @")
  field(ENAB, "Enabled")
  field(ENM, "1")
  field(VME,  "1")
}

#! Further lines contain data used by VisualDCT
#! View(86,0,1.1)
#! Record("$(IOC):PATTERNN-3",202,291,0,1,"$(IOC):PATTERNN-3")
#! Record("$(IOC):PATTERNDIAG",420,294,0,0,"$(IOC):PATTERNDIAG")
#! Field("$(IOC):PATTERNDIAG.INPA",16777215,0,"$(IOC):PATTERNDIAG.INPA")
#! Field("$(IOC):PATTERNDIAG.FLNK",16777215,1,"$(IOC):PATTERNDIAG.FLNK")
#! Link("$(IOC):PATTERNDIAG.FLNK","$(IOC):FIDUCIALRATE")
#! Record("$(IOC):FIDUCIALRATE",680,350,0,0,"$(IOC):FIDUCIALRATE")
#! TextBox(TB0,200,40,580,260,0,"Dialog",12,1,16777215,"PATTERN\nInputs Message and parses into 5 MODIFIERS\nOutputs:\nE MODIFIER1, N-3\nF MODIFIER2, N-3\nG MODIFIER3, N-3\nH MODIFIER4, N-3\nI  MODIFIER5, N-3\nJ  BEAMCODE, N-3\nL  PULSEID, N-3",null)
